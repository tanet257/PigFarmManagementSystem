# ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Models vs Database Columns

## 1Ô∏è‚É£ **PigSell Model** ‚úÖ ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

### Columns ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô Database:
```php
‚úÖ customer_id              // Foreign key -> customers
‚úÖ sale_number              // ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ç‡∏≤‡∏¢ (SELL-2025-001)
‚úÖ farm_id                  // Foreign key -> farms
‚úÖ batch_id                 // Foreign key -> batches
‚úÖ pig_loss_id              // Foreign key -> pig_deaths
‚úÖ sell_date                // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢
‚úÖ sell_type                // ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
‚úÖ quantity                 // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
‚úÖ total_weight             // ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏£‡∏ß‡∏°‡πÄ‡∏î‡∏¥‡∏°
‚úÖ estimated_weight         // ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£
‚úÖ actual_weight            // ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ä‡∏±‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á
‚úÖ avg_weight_per_pig       // ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢/‡∏ï‡∏±‡∏ß
‚úÖ price_per_kg             // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Å‡∏Å.
‚úÖ total_price              // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°
‚úÖ discount                 // ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î
‚úÖ shipping_cost            // ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á
‚úÖ net_total                // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (total_price - discount + shipping_cost)
‚úÖ payment_method           // ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î/‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô/‡πÄ‡∏ä‡πá‡∏Ñ/‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
‚úÖ payment_term             // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
‚úÖ payment_status           // ‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß/‡∏ä‡∏≥‡∏£‡∏∞‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô/‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞/‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î
‚úÖ paid_amount              // ‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß
‚úÖ balance                  // ‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠
‚úÖ due_date                 // ‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞
‚úÖ paid_date                // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞‡∏à‡∏£‡∏¥‡∏á
‚úÖ invoice_number           // ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏µ
‚úÖ receipt_number           // ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
‚úÖ buyer_name               // ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠
‚úÖ note                     // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏
‚úÖ sale_status              // ‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô/‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß/‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô/‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
‚úÖ receipt_file             // ‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏•‡∏¥‡∏õ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
‚úÖ date                     // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
‚úÖ cpf_reference_price      // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á CPF
‚úÖ cpf_reference_date       // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á
‚úÖ created_by               // Foreign key -> users (‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á)
‚úÖ approved_by              // Foreign key -> users (‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥)
‚úÖ approved_at              // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
```

### Columns ‡∏ó‡∏µ‡πà‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß:
```php
‚ùå delivery_date           // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ - ‡∏ô‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡πÄ‡∏≠‡∏á)
‚ùå delivery_time           // ‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ)
‚ùå price_per_pig           // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏ï‡∏±‡∏ß (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ)
‚ùå vehicle_number          // ‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ)
‚ùå driver_name             // ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ)
‚ùå distance_km             // ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ)
```

### Relationships:
```php
‚úÖ customer()              -> belongsTo(Customer::class)
‚úÖ farm()                  -> belongsTo(Farm::class)
‚úÖ batch()                 -> belongsTo(Batch::class)
‚úÖ pigLoss()               -> belongsTo(PigDeath::class)
‚úÖ payments()              -> hasMany(Payment::class)
‚úÖ creator()               -> belongsTo(User::class, 'created_by')
‚úÖ approver()              -> belongsTo(User::class, 'approved_by')
```

### Helper Methods:
```php
‚úÖ generateSaleNumber()    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ç‡∏≤‡∏¢ (SELL-2025-001)
‚úÖ calculateNetTotal()     // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏∏‡∏ó‡∏ò‡∏¥
‚úÖ calculateBalance()      // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠
‚úÖ isPaid()                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
‚úÖ isOverdue()             // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
```

---

## 2Ô∏è‚É£ **Customer Model** ‚úÖ ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

### Columns:
```php
‚úÖ customer_code           // ‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (CUST-001)
‚úÖ customer_name           // ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤/‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó
‚úÖ customer_type           // ‡∏ô‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤/‡πÇ‡∏£‡∏á‡∏ä‡∏≥‡πÅ‡∏´‡∏•‡∏∞/‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡πÇ‡∏†‡∏Ñ
‚úÖ phone                   // ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£
‚úÖ line_id                 // LINE ID
‚úÖ address                 // ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà
‚úÖ tax_id                  // ‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏†‡∏≤‡∏©‡∏µ (nullable - ‡∏ñ‡πâ‡∏≤‡∏Ç‡∏≠‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö)
‚úÖ branch                  // ‡∏™‡∏≤‡∏Ç‡∏≤ (nullable)
‚úÖ credit_days             // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
‚úÖ credit_limit            // ‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
‚úÖ total_purchased         // ‡∏¢‡∏≠‡∏î‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏∞‡∏™‡∏°
‚úÖ total_outstanding       // ‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞
‚úÖ total_orders            // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠
‚úÖ last_purchase_date      // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
‚úÖ note                    // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏
‚úÖ is_active               // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
```

### Relationships:
```php
‚úÖ pigSells()              -> hasMany(PigSell::class)
```

### Scopes:
```php
‚úÖ scopeActive()           // ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà active
‚úÖ scopeBrokers()          // ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ô‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤
```

### Helper Methods:
```php
‚úÖ hasAvailableCredit()    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
‚úÖ updatePurchaseStats()   // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠
‚úÖ addOutstanding()        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞
‚úÖ reduceOutstanding()     // ‡∏•‡∏î‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞
‚úÖ generateCustomerCode()  // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
```

---

## 3Ô∏è‚É£ **Payment Model** ‚úÖ ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

### Columns:
```php
‚úÖ pig_sell_id             // Foreign key -> pig_sells
‚úÖ payment_number          // ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞ (PAY-2025-001)
‚úÖ payment_date            // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞
‚úÖ amount                  // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
‚úÖ payment_method          // ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î/‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
‚úÖ reference_number        // ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÇ‡∏≠‡∏ô (nullable)
‚úÖ bank_name               // ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (nullable)
‚úÖ receipt_file            // ‡∏™‡∏•‡∏¥‡∏õ‡πÇ‡∏≠‡∏ô (nullable)
‚úÖ note                    // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏
‚úÖ recorded_by             // Foreign key -> users (‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å)
```

### Columns ‡∏ó‡∏µ‡πà‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß:
```php
‚ùå cheque_date             // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πá‡∏Ñ (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏ä‡πá‡∏Ñ)
```

### Relationships:
```php
‚úÖ pigSell()               -> belongsTo(PigSell::class)
‚úÖ recordedBy()            -> belongsTo(User::class, 'recorded_by')
```

### Helper Methods:
```php
‚úÖ generatePaymentNumber() // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞ (PAY-2025-001)
```

---

## üìä ‡∏™‡∏£‡∏∏‡∏õ

### ‚úÖ ‡∏ó‡∏∏‡∏Å Model ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Database ‡πÅ‡∏•‡πâ‡∏ß!

| Model | Status | Columns | Relationships | Methods |
|-------|--------|---------|---------------|---------|
| PigSell | ‚úÖ | 37 | 7 | 5 |
| Customer | ‚úÖ | 16 | 1 | 6 |
| Payment | ‚úÖ | 10 | 2 | 1 |

### üéØ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:

1. **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á** (‡∏ô‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡πÄ‡∏≠‡∏á)
   - ‚ùå delivery_date, delivery_time
   - ‚ùå vehicle_number, driver_name, distance_km

2. **‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ä‡πá‡∏Ñ** (‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î/‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô)
   - ‚ùå cheque_date

3. **‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏ï‡∏±‡∏ß** (‡∏Ç‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ï‡∏±‡∏ß)
   - ‚ùå price_per_pig

### üöÄ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!

Migration ‡∏£‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (Exit Code: 0)
Models ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö database ‡πÅ‡∏•‡πâ‡∏ß
‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á tables ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
