# üîí Batch "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô" - ‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

## üìå ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏∏‡πà‡∏ô‡∏´‡∏°‡∏π (Batch) ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô **"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô"**:
1. ‚úÖ **‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏•‡πâ‡∏≤** ‚Üí set `current_quantity = 0` ‡πÉ‡∏ô `batch_pen_allocations`
2. ‚úÖ **‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà** ‚Üí ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Dairy, PigSell ‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß

---

## üéØ ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (Business Logic)

### **1. ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏∑‡∏ô current_quantity?**

```
‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏ü‡∏≤‡∏£‡πå‡∏°:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‡πÄ‡∏•‡πâ‡∏≤ A ‡∏°‡∏µ capacity 200 ‡∏ï‡∏±‡∏ß

‚ñ∂Ô∏è ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏£‡∏±‡∏ö‡∏´‡∏°‡∏π‡∏£‡∏∏‡πà‡∏ô 001 ‡πÄ‡∏Ç‡πâ‡∏≤ 150 ‡∏ï‡∏±‡∏ß
   - allocated_pigs = 150
   - current_quantity = 150
   - ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏•‡πâ‡∏≤ = 200 - 150 = 50 ‡∏ï‡∏±‡∏ß

‚ñ∂Ô∏è ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 90: ‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏π‡πÑ‡∏õ 100 ‡∏ï‡∏±‡∏ß
   - allocated_pigs = 150 (‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
   - current_quantity = 50
   - ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏•‡πâ‡∏≤ = 200 - 50 = 150 ‡∏ï‡∏±‡∏ß ‚úÖ

‚ñ∂Ô∏è ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 120: ‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏π‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏°‡∏î (50 ‡∏ï‡∏±‡∏ß)
   - allocated_pigs = 150 (‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
   - current_quantity = 0
   - ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏•‡πâ‡∏≤ = 200 - 0 = 200 ‡∏ï‡∏±‡∏ß ‚úÖ
   - ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∏‡πà‡∏ô ‚Üí "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô"

üéØ ‡∏ú‡∏•:
   - ‡πÄ‡∏•‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏° 200 ‡∏ï‡∏±‡∏ß ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏´‡∏°‡∏π‡∏£‡∏∏‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà
   - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
```

**‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô current_quantity:**
```
‚ùå ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏•‡πâ‡∏≤ = 200 - 150 = 50 ‡∏ï‡∏±‡∏ß
   ‚Üí ‡πÄ‡∏•‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏´‡∏°‡∏π allocated_pigs = 150 ‡∏ï‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
   ‚Üí ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏î‡πâ
   ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà (‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°)
```

---

### **2. ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å?**

```
‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏´‡∏•‡∏±‡∏Å:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Integrity)
   - ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô = ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏°‡∏π‡πÅ‡∏•‡πâ‡∏ß (current_quantity = 0)
   - ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ ‚Üí ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á

2. ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ/‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô
   - ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô = ‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß
   - ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ ‚Üí ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

3. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ü‡∏≤‡∏£‡πå‡∏°
   - ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô = ‡πÄ‡∏•‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß
   - ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ ‚Üí ‡∏™‡∏±‡∏ö‡∏™‡∏ô (‡∏°‡∏µ‡∏´‡∏°‡∏π‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?)

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå: ‡∏£‡∏∏‡πà‡∏ô 001 ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß (current_quantity = 0)

‚ùå ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:
   1. ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ú‡∏¥‡∏î batch_id
   2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å "‡∏´‡∏°‡∏π‡∏ï‡∏≤‡∏¢ 5 ‡∏ï‡∏±‡∏ß" ‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô 001
   3. current_quantity = 0 - 5 = -5 ‚Üê ‡πÑ‡∏°‡πà‡∏™‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏°‡∏ú‡∏•!
   4. ‡∏£‡∏∞‡∏ö‡∏ö error ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô

‚úÖ ‡∏ñ‡πâ‡∏≤‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:
   1. ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ú‡∏¥‡∏î batch_id
   2. ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á: "‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß"
   3. ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç batch_id ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
   4. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚úÖ
```

---

## üîß ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ó‡∏≥

### **1. BatchController.php - ‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô**

```php
public function updateBatch(Request $request, $id)
{
    DB::beginTransaction();
    try {
        $batch = Batch::findOrFail($id);

        $oldStatus = $batch->status;
        $newStatus = $request->status;

        if ($oldStatus != '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô' && $newStatus == '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô') {
            // 1. Set end_date
            $batch->end_date = now();

            // 2. ‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏•‡πâ‡∏≤ (set current_quantity = 0)
            BatchPenAllocation::where('batch_id', $id)
                ->update(['current_quantity' => 0]);

            // 3. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï batch current_quantity
            $batch->current_quantity = 0;
        }

        $batch->status = $newStatus;
        $batch->update($validated);

        DB::commit();
        return redirect()->route('batches.index')
            ->with('success', '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Batch ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏•‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß)');
    } catch (\Exception $e) {
        DB::rollBack();
        return redirect()->back()->with('error', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' . $e->getMessage());
    }
}
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
```sql
-- ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡∏£‡∏∏‡πà‡∏ô 001 ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á)
batch_pen_allocations:
  batch_id=1, pen_id=1, allocated_pigs=100, current_quantity=20

batches:
  id=1, status='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á', current_quantity=20

-- ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô"
batch_pen_allocations:
  batch_id=1, pen_id=1, allocated_pigs=100, current_quantity=0 ‚Üê ‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß!

batches:
  id=1, status='‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô', current_quantity=0, end_date='2025-10-12'

-- ‡πÄ‡∏•‡πâ‡∏≤‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á
‡πÄ‡∏•‡πâ‡∏≤ capacity: 200
occupied (current_quantity): 0
remaining: 200 - 0 = 200 ‡∏ï‡∏±‡∏ß ‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏´‡∏°‡∏π‡∏£‡∏∏‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà
```

---

### **2. DairyController.php - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô**

```php
public function uploadDairy(Request $request)
{
    try {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ batch
        $batch = Batch::find($request->batch_id);
        if (!$batch) {
            return redirect()->back()->with('error', '‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∏‡πà‡∏ô');
        }

        if ($batch->status === '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô') {
            return redirect()->back()
                ->with('error', '‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
        }

        // ... ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
    }
}
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
```
‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå 1: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Dairy ‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∏‡πà‡∏ô: BATCH-2024-001 (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á)
‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å: ‡∏´‡∏°‡∏π‡∏ï‡∏≤‡∏¢ 3 ‡∏ï‡∏±‡∏ß
‡∏ú‡∏•: ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå 2: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Dairy ‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∏‡πà‡∏ô: BATCH-2024-001 (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô)
‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å: ‡∏´‡∏°‡∏π‡∏ï‡∏≤‡∏¢ 3 ‡∏ï‡∏±‡∏ß
‡∏ú‡∏•: ‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß
```

---

### **3. PigSellController.php - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô**

```php
public function create(Request $request)
{
    DB::beginTransaction();
    try {
        $validated = $request->validate([...]);

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ batch
        $batch = Batch::find($validated['batch_id']);
        if (!$batch) {
            throw new \Exception('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∏‡πà‡∏ô');
        }

        if ($batch->status === '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô') {
            throw new \Exception('‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
        }

        // ... ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
    }
}
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
```
‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå 1: ‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏π‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∏‡πà‡∏ô: BATCH-2024-001 (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á)
‡∏Ç‡∏≤‡∏¢: 30 ‡∏ï‡∏±‡∏ß
‡∏ú‡∏•: ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå 2: ‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏π‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∏‡πà‡∏ô: BATCH-2024-001 (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô)
‡∏Ç‡∏≤‡∏¢: 30 ‡∏ï‡∏±‡∏ß
‡∏ú‡∏•: ‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß
```

---

## üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á

| ‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå | ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç | ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç |
|-----------|----------|----------|
| **‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô"** | ‚ùå set end_date ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß | ‚úÖ set end_date + ‡∏Ñ‡∏∑‡∏ô current_quantity = 0 |
| **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Dairy ‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô** | ‚ö†Ô∏è ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ (‡∏ú‡∏¥‡∏î) | ‚úÖ ‡πÅ‡∏™‡∏î‡∏á Error ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô |
| **‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏π‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô** | ‚ö†Ô∏è ‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ (‡∏ú‡∏¥‡∏î) | ‚úÖ ‡πÅ‡∏™‡∏î‡∏á Error ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô |
| **‡∏£‡∏±‡∏ö‡∏´‡∏°‡∏π‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô** | ‚ö†Ô∏è ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ (‡∏ú‡∏¥‡∏î) | ‚úÖ ‡πÅ‡∏™‡∏î‡∏á Error ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô |
| **‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏•‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô** | ‚ùå ‡∏¢‡∏±‡∏á‡∏ô‡∏±‡∏ö allocated_pigs | ‚úÖ ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏ï‡πá‡∏° (current_quantity = 0) |

---

## üîÑ Workflow ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### **1. ‡∏£‡∏∏‡πà‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á)**
```
Day 1: ‡∏£‡∏±‡∏ö‡∏´‡∏°‡∏π 150 ‡∏ï‡∏±‡∏ß
  ‚îî‚îÄ allocated_pigs = 150
  ‚îî‚îÄ current_quantity = 150
  ‚îî‚îÄ status = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á' ‚úÖ

Day 60: ‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏π 50 ‡∏ï‡∏±‡∏ß
  ‚îî‚îÄ current_quantity = 100
  ‚îî‚îÄ status = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á' ‚úÖ

Day 90: ‡∏´‡∏°‡∏π‡∏ï‡∏≤‡∏¢ 5 ‡∏ï‡∏±‡∏ß
  ‚îî‚îÄ current_quantity = 95
  ‚îî‚îÄ status = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á' ‚úÖ

Day 120: ‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏π‡∏´‡∏°‡∏î (95 ‡∏ï‡∏±‡∏ß)
  ‚îî‚îÄ current_quantity = 0
  ‚îî‚îÄ status = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á' ‚úÖ
```

### **2. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô**
```
‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‚Üí "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô" ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥:
  ‚úÖ set end_date = now()
  ‚úÖ set current_quantity = 0 (‡∏ó‡∏∏‡∏Å pen)
  ‚úÖ set batch.current_quantity = 0
  ‚úÖ ‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏•‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

‡∏ú‡∏•:
  - ‡πÄ‡∏•‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏° ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏´‡∏°‡∏π‡∏£‡∏∏‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà
  - ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Dairy/Sell ‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å
```

### **3. ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô**
```
‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Dairy:
  ‚ùå ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏™‡∏î‡∏á: "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß"

‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏π:
  ‚ùå ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏™‡∏î‡∏á: "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß"

‚Üí ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∏‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏ó‡∏ô
```

---

## ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á

### **1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**
```
‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á current_quantity > 0:
  ‚Üí ‡∏ï‡πâ‡∏≠‡∏á manual update ‡πÉ‡∏´‡πâ current_quantity = 0

SQL:
UPDATE batch_pen_allocations
SET current_quantity = 0
WHERE batch_id IN (
  SELECT id FROM batches WHERE status = '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô'
);

UPDATE batches
SET current_quantity = 0
WHERE status = '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô';
```

### **2. ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏•‡∏±‡∏ö**
```
‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô" ‚Üí "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á":
  ‚ö†Ô∏è current_quantity ‡∏¢‡∏±‡∏á = 0
  ‚Üí ‡∏ï‡πâ‡∏≠‡∏á manual update ‡∏Å‡∏•‡∏±‡∏ö
  ‚Üí ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏•‡∏±‡∏ö (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
```

### **3. ‡∏Å‡∏≤‡∏£‡∏•‡∏ö Batch**
```
‡∏ñ‡πâ‡∏≤‡∏•‡∏ö batch ‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô:
  ‚úÖ batch_pen_allocations ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏ï‡∏≤‡∏° (CASCADE)
  ‚úÖ current_quantity = 0 ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
  ‚Üí ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
```

---

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ

### **‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ:**
1. ‚úÖ **‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û** - ‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
2. ‚úÖ **‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î** - ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏¥‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
3. ‚úÖ **‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á** - ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô = ‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß
4. ‚úÖ **‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡πà‡∏≤‡∏¢** - ‡∏£‡∏π‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ß‡πà‡∏≤‡∏£‡∏∏‡πà‡∏ô‡πÑ‡∏´‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à/‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à

### **‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß:**
- ‚úÖ `app/Http/Controllers/BatchController.php` - ‡∏Ñ‡∏∑‡∏ô current_quantity
- ‚úÖ `app/Http/Controllers/DairyController.php` - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Dairy (Feed/Medicine/Death)
- ‚úÖ `app/Http/Controllers/PigSellController.php` - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Sell
- ‚úÖ `app/Http/Controllers/PigEntryController.php` - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏±‡∏ö‡∏´‡∏°‡∏π‡πÄ‡∏Ç‡πâ‡∏≤

---

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï:** 12 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2025
**‡∏ú‡∏π‡πâ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï:** GitHub Copilot
**‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:** 1.0
